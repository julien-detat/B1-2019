<!DOCTYPE html>
<html amp lang="en">
<head>
<meta charset="utf-8" />
<script async src="https://cdn.ampproject.org/v0.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<title>Resilient Web Design—Chapter 5</title>
<meta name="description" content="Layers" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@adactio" />
<meta name="twitter:creator" content="@adactio" />
<meta name="twitter:title" property="og:title" content="Resilient Web Design—Chapter 5" />
<meta name="twitter:description" property="og:description" content="Chapter Five: Layers" />
<meta name="twitter:url" property="og:url" content="https://resilientwebdesign.com/chapter5/" />
<meta name="twitter:image" property="og:image" content="https://resilientwebdesign.com/chapter5/images/medium/shearing-layers.jpg" />
<link rel="canonical" href="https://resilientwebdesign.com/chapter5/" />
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>

@font-face {
    font-family: 'et-book';
    src: url('../fonts/etbookot-roman-webfont.woff2') format('woff2'),
         url('../fonts/etbookot-roman-webfont.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'et-book';
    src: url('../fonts/etbookot-italic-webfont.woff2') format('woff2'),
         url('../fonts/etbookot-italic-webfont.woff') format('woff');
    font-weight: normal;
    font-style: italic;
}
@font-face {
    font-family: 'et-book';
    src: url('../fonts/etbookot-bold-webfont.woff2') format('woff2'),
         url('../fonts/etbookot-bold-webfont.woff') format('woff');
    font-weight: bold;
    font-style: normal;
}

html {
    font-size: calc( 16px + (32 - 16) * ( (100vw - 320px) / ( 1200 - 320) ));
}
body {
    background-color: white;
    color: black;
    font-family: 'et-book', Georgia, serif;
    font-weight: normal;
    font-variant-ligatures: common-ligatures;
    font-variant-numeric: oldstyle-nums;
    line-height: 1.5;
    margin: 0;
    padding: 0;
}
@media all and (min-width: 30em) {
    body {
        line-height: 1.55;
    }
}
@media all and (min-width: 40em) {
    body {
        line-height: 1.6;
    }
}
@media all and (min-width: 50em) {
    body {
        line-height: 1.65;
    }
}
@media all and (min-width: 60em) {
    body {
        line-height: 1.7;
    }
}
@media all and (min-width: 70em) {
    body {
        line-height: 1.75;
    }
}
a {
   text-decoration: none;
   transition: all 0.25s;
}
a:link,
a:visited {
    background-color: transparent;
    color: rgba(204,0,0,0.9);
}
a:hover,
a:focus {
    background-color: rgba(204,0,0,0.9);
    border-color: rgba(204,0,0,0.9);
    color: white;
}
amp-img {
    border: none;
    max-width: 100%;
}
abbr,
code.markup.element,
code.markup.attribute {
    text-decoration: none;
    font-family: inherit;
    font-variant: all-small-caps;
}
pre {
    color: rgba(0,0,0,0.75);
    white-space: pre-wrap;
    margin: 1em;
}
sup {
    vertical-align: top;
}
i,
em,
cite {
    font-style: italic;
}
b,
strong {
    font-weight: bold;
}
p {
    margin: 2em 0;
}
ul,
ol {
    margin: 2em 0;
    padding: 0;
}
li {
    margin: 1em 0;
    padding: 0;
}
h1 {
    font-size: calc( 36px + (144 - 36) * ( (100vw - 320px) / ( 1200 - 320) ));
    font-weight: normal;
    line-height: 1;
    margin: 0;
}
h2 {
    font-size: calc( 24px + (48 - 24) * ( (100vw - 320px) / ( 1200 - 320) ));
    font-weight: normal;
    line-height: 1.125;
    margin: 6rem 0 0;
}
h3 {
    font-size: calc( 20px + (40 - 20) * ( (100vw - 320px) / ( 1200 - 320) ));
    font-weight: normal;
    line-height: 1.25;
    margin: 4rem 0 0;
}
h4 {
    font-size: calc( 18px + (36 - 18) * ( (100vw - 320px) / ( 1200 - 320) ));
    font-weight: normal;
    line-height: 1.325;
    margin: 3rem 0 0;
}
h5 {
    font-size: calc( 16px + (32 - 16) * ( (100vw - 320px) / ( 1200 - 320) ));
    font-weight: normal;
    line-height: 1.5;
    margin: 2rem 0 0;
}

blockquote {
    font-style: italic;
    margin: 2em;
    padding: 0;
}
blockquote p:first-child,
blockquote p:last-child {
    position: relative;
}
blockquote p:first-child::before,
blockquote p:last-child::after {
    font-style: normal;
    font-size: 4em;
    line-height: 1;
    color: rgba(0,0,0,0.25);
    position: absolute;
}
blockquote p:first-child::before {
    content: '“';
    top: -0.125em;
    left: -0.5em;
}
blockquote p:last-child::after {
    content: '”';
}

figure {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin: 2em -1em;
}
figcaption {
    font-family: Futura, 'Gill Sans', 'Helvetica Neue', Arial, sans-serif;
    font-size: calc( 13px + (26 - 13) * ( (100vw - 320px) / ( 1200 - 320) ));
    font: caption;
    color: captionText;
    margin: 1em;
}
figcaption small {
    font-size: inherit;
    display: block;
}

header {
    padding: 1em;
    background-color: rgba(95,121,149,1);
    color: white;
}
header hgroup {
    min-height: calc(100vh - 2em);;
}
header hgroup h1::first-line {
    font-size: 1.25em;
}
header hgroup,
header > a {
    display: block;
    max-width: 25em;
    margin-left: auto;
    margin-right: auto;
}
header > a {
    font-family: Futura, 'Gill Sans', 'Helvetica Neue', Arial, sans-serif;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    height: 0.8em;
    line-height: 1;
}
header a:link,
header a:visited,
header a:hover,
header a:focus {
    color: inherit;
    background-color: inherit;
}

main {
    max-width: 25em;
    margin-left: auto;
    margin-right: auto;
    padding: 1em;
}
main > h1 {
    letter-spacing: 0.025em;
    min-height: 2em;
    border-bottom: 0.25em solid rgba(95,121,149,0.5);
}
main > h1 span {
    display: block;
    font-size: 0.5em;
    text-transform: lowercase;
    font-variant: small-caps;
    letter-spacing: 0.3em;
    margin-bottom: 1em;
}
main > p:first-of-type::first-line {
    font-variant: small-caps;
    font-size: calc( 24px + (48 - 24) * ( (100vw - 320px) / ( 1200 - 320) ));
    line-height: 1.25;
    letter-spacing: 0.1em;
    text-align: justify;
}
main > p:first-of-type cite {
    white-space: pre;
}

nav a {
    display: block;
    padding: 1em;
}
nav cite span {
    font-style: normal;
    font-size: 0.8em;
    text-transform: lowercase;
    font-variant: small-caps;
    letter-spacing: 0.3em;
}
nav a[rel="next"] {
    text-align: center;
    border-top: 1px solid;
    border-bottom: 1px solid;
}
nav a[rel="next"] cite {
    letter-spacing: 0.05em;
    font-style: normal;
}
nav a[rel="next"] cite span {
    display: block;
}
</style>
<script async custom-element="amp-install-serviceworker" src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></script>
</head>
<body>

<header>
<a href="../">Resilient Web Design</a>
</header>

<main>

<h1><span>Chapitre 5:</span> Layers</h1>

<p>Dans son livre <cite>How Buildings Learn</cite> , Stewart Brand souligne une idée de Franck Duffy, un architecte Britannique:

</p>

<blockquote>
<p> Un bâtiment correctement conçu a plusieurs couches de longévité. </p>
</blockquote>

<p>Duffy appelle ça: des couches de cisaillement. Chacune de ces couches bouge à une échelle de temps différente. Brand approfondi l’idée et propose 6 couches de substitution:</p>

<ol>
<li><strong>Le Lieu</strong>—La localisation physique d’un bâtiment change uniquement que sur une échelle de temps géologique.</li>
<li><strong>La Structure</strong>—Le bâtiment en lui même peut durer des siècles.</li>
<li><strong>La Peau</strong>—La surface extérieure est rénovée ou a une nouvelle couche de peinture toutes les décennies.</li>
<li><strong>Les Services</strong>—La plomberie et le câblage ont besoin d’être rénovés tous les 10 ans environ.</li>
<li><strong>Le plan des lieux</strong>—La disposition des murs et des portes peut changer de temps en temps.
</li>
<li><strong>Les objets</strong>—L’agencement des meubles dans une pièce peut changer tous les jours.</li>
</ol>

<figure>
<amp-img src="images/small/shearing-layers.jpg" alt="A diagram of a house." srcset="images/medium/shearing-layers.jpg 2x, images/large/shearing-layers.jpg 3x" width="400" height="300">
</amp-img>
<figcaption>Shearing layers.</figcaption>
</figure>

<p>L’idée des couches de cisaillement peut aussi être appliquée à nos créations sur le web. Nos noms de domaines sont les sites géologique sur lesquels nous construisons. À l’autre extrémité de l’échelle de temps, le contenu sur le Web —les « choses »—peut être ajouté et mis à jour dans l’heure, la minute, ou même la seconde. Entre les couches il y a des couches de structure, présentations et comportements:
 <abbr>HTML</abbr>, <abbr>CSS</abbr>, et JavaScript.</p>

<p>Ces couches peuvent être couplées de manières lâche, mais elles ne sont pas complètement indépendantes. Tout comme un bâtiment ne peut avoir de meuble sans avoir d’abord des pièces et des murs, une feuille de style a besoin de quelques balises pour fonctionner. La liaison entre la structure et la présentation est traitée par les sélecteurs dans le <abbr>CSS</abbr>: sélecteurs d’éléments, sélecteurs de classe, etc… Avec JavaScript, le couplage est géré par le vocabulaire du modèle de document, ou
 <abbr>DOM</abbr>.</p>

<p>Dans un autre livre, <cite>The Clock Of The Long Now</cite>, Stewart Brand applique l’idée des couches de cisaillement—ou couches progressive—à la civilisation elle-même. La couche qui se déplace le plus lentement est la nature, puis il y a la culture, suivie par le gouvernement, puis les infrastructures, enfin le commerce et la mode sont les couches les plus rapides. Dans cette organisation, chaque couche dépend de la couche inférieure. À son tour, l’accumulation de chaque couche successive permet un «possible adjacent» rempli de plus d’opportunités.
</p>

<p>LDe même, l’expressivité de <abbr>CSS</abbr> et JavaScript est seulement rendue possible sur une base de  <abbr>HTML</abbr>, qui elle même requiert qu’une<abbr>URL</abbr> soit accessible, laquelle dépend à son tour du protocole de transfert HyperText, qui repose sur le socle fondamental de <abbr>TCP/IP</abbr>.</p>

<p>Chacune des couches de cisaillement de la bande peut être décollée pour en révéler une autre. Exécuter ce processus en sens inverse - en appliquant chaque couche à la fois - est un principe clé d’une conception résistante du web.
</p>

<section aria-labelledby="progressiveenhancement">

<h2 id="progressiveenhancement">
Amélioration progressive</h2>

<p>En 2003, le festival Southby Southwest à Austin, au Texas était à la base un événement pour les musiciens et les cinéastes. Aujourd’hui les morceaux de films et musiques sont éclipsés par la mastodonte de Southby Southwest Interactive, dédié à tout ce qui est numérique. En 2003 South by Southwest Interactive était une petite affaire, entamé dans un coin d’un étage du Centre de Convention d’Austin. Ce fut l'occasion pour quelques web designers et blogueurs de se réunir et de partager des idées. Cette année, Steve Champeon et Nick Finck ont fait une présentation intitulée  <em>Inclusive Web Design For the Future with Progressive Enhancement</em>. Ils ont ouvert avec cet appel aux armes:
</p>

<blockquote>
<p>Le Web design doit mûrir et accepter les évolutions des dernières années, abandonner les attitudes d'exclusion formées à l'ère de la bulle Internet, réaliser l'avenir de nombreux appareils et plates-formes et séparer le balisage sémantique de la logique et du comportement de présentation. </p>
</blockquote>

<p>Comme Tim Berners‐Lee, Steven Champeon a eu une expérience du travail avec SGML, le langage de balisage qui a lourdement influencé  <abbr>HTML</abbr>. En traitant des documents devant être réutilisés pour différents résultats, il en est venu à valoriser la séparation de la structure de la présentation. Un document significativement balisé peut être présenté de multiples façons par l’ajout du <abbr>CSS</abbr> et du JavaScript.</p>

<p>Cette approche multicouche du Web permet de diffuser le même contenu à un large éventail de personnes. Mais cela ne signifie pas que tout le monde a la même expérience. Champeon s'est rendu compte qu'une forte séparation des problèmes permettrait d'appliquer des améliorations en fonction des capacités du périphérique de l'utilisateur final.
</p>

<p>Pour paraphraser Karl Marx , l’amélioration progressive permet aux concepteurs d’interroger chaque navigateur en fonction de ses capacités et de le livrer à chaque appareil en fonction de ses besoins.
</p>

</section>

<section aria-labelledby="dowebsitesneedtolookexactlythesameineverybrowser">

<h2 id="dowebsitesneedtolookexactlythesameineverybrowser">Les sites web doivent-ils avoir exactement la même apparence dans tous les navigateurs?</h2>

<p>
Certains concepteurs de sites Web craignaient que l'amélioration progressive soit une camisole pour la créativité. Concevoir le plus petit dénominateur commun ne sonnait pas comme une recette de progrès. Mais c'était un malentendu. L’amélioration progressive demande aux concepteurs de 
<em>commencer</em> par le plus petit dénominateur commun (un document bien annoté), mais il n’y a pas de limite à ce qu’ils peuvent faire à partir de là.</p>

<p>En fait, c'est la présence même d'une solide base de code <abbr>HTML</abbr> qui permet aux concepteurs Web d'expérimenter les <abbr>CSS</abbr>les plus récents et les plus performantes. Grâce à la loi de Postel et au modèle de traitement des erreurs de <abbr>CSS</abbr>, les concepteurs sont libres d'appliquer des styles qui ne fonctionnent que dans les navigateurs les plus récents.
</p>

<p>Cela signifie que tous ne connaîtront pas le même design visuel. Ce n'est pas un bug. Ceci est une fonctionnalité du web. Nouveaux navigateurs et anciens navigateurs; affichages monochromes et affichages multicolores; connexions rapides et connexions lentes; grands écrans, petits écrans et pas d'écrans; tout le monde peut accéder à votre contenu. Ce contenu <em>devrait</em> avoir un aspect différent dans des situations aussi variées. Si un site Web a la même apparence sur un navigateur vieux de dix ans que sur les appareils les plus récents, ils ne profitent sans doute pas de la grande souplesse qu'ils offrent.
</p>

<p>Pour souligner cela, le designer Dan Cederholm a créé un site Web pour répondre à la question «Les sites Web doivent-ils être exactement identiques dans tous les navigateurs?». Vous pouvez trouver la réponse à cette question à l'adresse <abbr><abbr>URL</abbr></abbr> suivante:</p>

<p>do<wbr>websites<wbr>need<wbr>to<wbr>look<wbr>exactly<wbr>the<wbr>same<wbr>in<wbr>every<wbr>browser<wbr>.com</p>

<p>Au risque de vous gâcher la surprise, la réponse est un «non!» retentissant. Si vous visitez ce site Web, vous verrez cette réponse affichée avec fierté. Mais selon les capacités de votre navigateur, vous pourrez ou non voir certains des fioritures stylistiques appliquées à cette réponse en un seul mot. Même si vous n'obtenez <em>aucun</em>  des styles, vous aurez toujours le contenu balisé en <abbr>HTML</abbr> sémantique.</p>

</section>

<section aria-labelledby="cuttingthemustard">

<h2 id="cuttingthemustard">Cutting the mustard</h2>

<p>Separating structure and presentation is relatively straightforward. You can declare whatever styles you want, safe in the knowledge that browsers will ignore what they don’t understand. Separating structure and behaviour isn’t quite so easy. If you give a browser some JavaScript that it doesn’t understand, not only will it not apply the desired behaviour, it will refuse to parse the rest of the JavaScript.</p>

<p>Before you use a particular feature in JavaScript, it’s worth testing to see if that feature is supported. This kind of feature detection can save your website’s visitors from having a broken experience because of an unsupported feature. If you want to use Ajax, check first that the browser supports the object you’re about to use to enable that Ajax functionality. If you want to use the geolocation <abbr>API</abbr>, check first that the browser supports it.</p>

<p>A team of web developers working on the <abbr>BBC</abbr> news website referred to this kind of feature detection as cutting the mustard. Browsers that cut the mustard get an enhanced experience. Browsers that don’t cut the mustard still get access to the content, but without the JavaScript enhancements.</p>

<p>Feature detection, cutting the mustard, whatever you want to call it, is a fairly straightforward technique. Let’s say you want to traverse the <abbr>DOM</abbr> using <code>querySelector</code> and attach events to some nodes in the document using <code>addEventListener</code>. Your mustard‐cutting logic might look something like this:</p>

<pre><code>if (document.querySelector &amp;&amp; window.addEventListener) {
    // Enhance!
}</code></pre>

<p>There are two points to note here:</p>

<ol>
<li>This is feature detection, not browser detection. Instead of asking “which browser are you?” and trying to infer feature support from the answer, it is safer to simply ask “do you support this feature?”</li>
<li>There is no <code>else</code> statement.</li>
</ol>

</section>

<section aria-labelledby="aggressiveenhancement">

<h2 id="aggressiveenhancement">Aggressive enhancement</h2>

<p>Back when web designers were trying to exert print‐like control over web browsers, a successful design was measured in pixel perfection: did the website look exactly the same in every browser?</p>

<p>Unless every browser supported a particular feature—like, say, rounded corners in <abbr>CSS</abbr>—then that feature was off the table. Instead, designers would fake it with extra markup and images. The resulting websites lacked structural honesty. Not only was this a waste of talent and energy on the part of the designers, it was a waste of the capabilities of modern web browsers.</p>

<p>The rise of mobiles, tablets, and responsive design helped to loosen this restrictive mindset. It is no longer realistic to expect pixel‐perfect parity across devices and browsers. But you’ll still find web designers bemoaning the fact that they have to support an older outdated browser because a portion of their audience are still using it.</p>

<p>They’re absolutely right. Anyone using that older browser should have access to the same content as someone using the latest and greatest web browser. But that doesn’t mean they should get the same experience. As Brad Frost puts it:</p>

<blockquote>
<p>There is a difference between support and optimization.</p>
</blockquote>

<p><em>Support</em> every browser ...but <em>optimise</em> for none.</p>

<p>Some designers have misunderstood progressive enhancement to mean that <em>all</em> functionality must be provided to <em>everyone</em>. It’s the opposite. Progressive enhancement means providing <em>core</em> functionality to everyone. After that, it’s every browser for itself. Far from restricting what features you can use, progressive enhancement provides web designers with a way to safely use the latest and greatest features without worrying about older browsers. Scott Jehl of the agency Filament Group puts it succinctly:</p>

<blockquote>
<p>Progressive Enhancement frees us to focus on the costs of building features for modern browsers, without worrying much about leaving anyone out. With a strongly qualified codebase, older browser support comes nearly for free.</p>
</blockquote>

<p>If a website is built using progressive enhancement then it’s okay if a particular feature isn’t supported or fails to load: Ajax, geolocation, whatever. As long as the core functionality is still available, web designers don’t need to bend over backwards trying to crowbar support for newer features into older browsers.</p>

<p>You also get a website that’s more resilient to JavaScript’s error‐handling model. Mat Marquis worked alongside Scott Jehl on the responsive website for the Boston Globe. He noted:</p>

<blockquote>
<p>Lots of cool features on the Boston Globe don’t work when <abbr>JS</abbr> breaks; “reading the news” is not one of them.</p>
</blockquote>

<p>The trick is identifying what is considered core functionality and what is considered an enhancement.</p>

</section>

<aside>
<h2>References</h2>
<ol>
<li><a href="http://www.hesketh.com/publications/inclusive_web_design_for_the_future/"><cite>Inclusive Web Design For the Future with Progressive Enhancement</cite></a> by Steven Champeon and Nick Finck</li>
<li><a href="http://dowebsitesneedtolookexactlythesameineverybrowser.com/"><cite>Do websites need to look exactly the same in every browser?</cite></a> by Dan Cederholm</li>
<li><a href="http://bradfrost.com/blog/mobile/support-vs-optimization/"><cite>Support <abbr>vs</abbr> Optimization</cite></a> by Brad Frost</li>
<li><a href="https://the-pastry-box-project.net/scott-jehl/2014-march-7"><cite>The Pastry Box</cite></a> by Scott Jehl</li>
</ol>
</aside>

</main>

<nav>
<a href="../chapter6/amp.html" rel="next"><cite><span>Chapter 6:</span> Steps</cite></a>
</nav>

<amp-install-serviceworker src="../serviceworker.js" data-iframe-src="https://resilientwebdesign.com/iframe.html" layout="nodisplay">
</amp-install-serviceworker>

</body>
</html>
